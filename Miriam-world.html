<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Miriam's Urban World</title>
  <style>
    /* ... (même CSS que précédemment, inchangé) ... */
    /* TIENS LA PARTIE CSS COMPLÈTE ICI POUR LA LISSER, PAS DE CHANGEMENT MAJEUR */
    ... <!-- Garde cette partie telle quelle pour la longueur du message, elle ne change pas vs la dernière version -->
  </style>

  <!-- Firebase CDN setup  -->
  <script src="https://www.gstatic.com/firebasejs/12.4.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/12.4.0/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/12.4.0/firebase-firestore.js"></script>
  <script src="https://www.gstatic.com/firebasejs/12.4.0/firebase-storage.js"></script>
  <script>
    // Configuration de TON PROJET (mets à jour storageBucket : corrige le .app en .com si besoin)
    const firebaseConfig = {
      apiKey: "AIzaSyD2NaFrHU1L-371vMXUuyxr9fHZYz3ePj8",
      authDomain: "lesfeygame.firebaseapp.com",
      projectId: "lesfeygame",
      storageBucket: "lesfeygame.appspot.com",  // ← corrige .app en .com
      messagingSenderId: "799524380159",
      appId: "1:799524380159:web:83b43bdbdd37534dff1bca",
      measurementId: "G-2XTS86C96K"
    };
    // Initialisation Firebase
    firebase.initializeApp(firebaseConfig);
    // Initialisation des services
    const db = firebase.firestore();
    const storage = firebase.storage();
    const auth = firebase.auth();
    auth.signInAnonymously();
    // expose partout
    window.FB = { db, storage, auth };
  </script>
</head>
<body>
  <div class="content">
    <audio id="backgroundMusic" loop autoplay>
      <source src="music/Victoria%20Monét%20-%20Dive%20(Lyric%20Video).mp3" type="audio/mpeg"/>
    </audio>

    <div class="header">
      <img src="baddielogo.png.PNG" alt="Logo" class="logo" onclick="window.location.href='index.html'"/>
      <div class="player-info"><span>🌙 Miriam's Urban Loft</span></div>
      <button class="sound-toggle" id="soundToggle">🔊</button>
    </div>

    <div class="particles" id="particles"></div>

    <div class="game-world">
      <h1 class="world-title">✨ Atelier de Miriam ✨</h1>
      <div class="world-zones">
        <!-- Design Studio -->
        <div class="zone" onclick="startMinigame('design')">
          <div class="zone-icon">🎨</div>
          <div class="zone-title">Design Studio</div>
          <div class="zone-description">Dessine tes créations sur la toile</div>
        </div>
        <!-- Rooftop Morpion -->
        <div class="zone" onclick="startMinigame('rooftop')">
          <div class="zone-icon">🌃</div>
          <div class="zone-title">Rooftop Morpion</div>
          <div class="zone-description">Joue seul ou à 2</div>
        </div>
        <!-- Mini Tetris -->
        <div class="zone" onclick="startMinigame('tetris')">
          <div class="zone-icon">🧱</div>
          <div class="zone-title">Mini Tetris</div>
          <div class="zone-description">Empile et aligne</div>
        </div>
        <!-- Wordle -->
        <div class="zone" onclick="startMinigame('wordle')">
          <div class="zone-icon">🔤</div>
          <div class="zone-title">Wordle</div>
          <div class="zone-description">Un mot aléatoire à deviner</div>
        </div>
        <!-- Memory -->
        <div class="zone" onclick="startMinigame('memory')">
          <div class="zone-icon">🧠</div>
          <div class="zone-title">Memory Match</div>
          <div class="zone-description">Retourne les paires</div>
        </div>
        <!-- Puissance 4 -->
        <div class="zone" onclick="startMinigame('connect4')">
          <div class="zone-icon">🟡</div>
          <div class="zone-title">Puissance 4</div>
          <div class="zone-description">Aligne 4 jetons</div>
        </div>
      </div>
    </div>

    <div class="miriam-character"></div>

    <!-- Leaderboard panel -->
    <div class="leaderboard-panel" id="leaderboardPanel">
      <h3>🏆 Classement (semaine <span id="lbWeek"></span>)</h3>
      <div class="lb-controls">
        <input id="lbName" class="name-input" placeholder="Ton prénom..." />
        <button class="action-btn" id="lbSave">OK</button>
      </div>
      <ul id="leaderboardList"></ul>
    </div>

    <!-- Modal Minigame -->
    <div class="minigame-panel" id="minigamePanel">
      <h2 class="minigame-title" id="gameTitle">Mini-Game</h2>
      <div class="minigame-content" id="gameContent"></div>
      <button class="close-btn" onclick="closeMinigame()">Fermer</button>
    </div>
    <div class="score-popup" id="scorePopup">+1 point ! ✨</div>
  </div>

<!-- TOUT TON SCRIPT PRINCIPAL ICI (inchangé sauf la galerie et le classement) -->

<script>
/* ... (reprends ensuite le script complet remis à jour avec FB.db, FB.storage, voir les versions adapt. précédentes) ... */
</script>
</body>
</html>
